# Contributing

## Translating

First of all, **do not touch the `base.pot` file!** `.pot` files are pure templates and should not be altered. This base template is generated by executing `pybabel extract . -o locale/base.pot --ignore-dirs=venv-time-journal`. The translations happen only in `.po` files. To generate a `.po` file for a language which is not added yet, execute `pybabel init -l <locale-name> -i locale/base.pot -d locale`. This should create a new directory `locale/<locale-name>/` with a `messages.po` file. Those files can be compiled by executing `pybabel compile -l <locale> -d locale`.

## Setup Development Environment

```bash
pamac install tk
```

```bash
# Install the Python package virtualenv
pip install virtualenv
# Create a new virtual environment
virtualenv venv-time-journal
# Active the environment
source venv-time-journal/bin/activate # Linux
venv-time-journal\Scripts\activate # Windows
# Install dependencies
pip install -r requirements.txt
```

## Testing

Instead of running `python -m unittest -v`, use `coverage run -m unittest -v` instead. This will measure the test coverage of the unit tests. To generat a report for the Coverage Gutter plugin, run `coverage xml`. Then VS Code should show the test coverage. `coverage report` will print an overview table to the console output. Pay attention to the fact that files are not listed, if they have 0% coverage (no test referencing them).

## Building with PyInstaller

Linux:

```bash
# Arch Linux
pyinstaller app.py --name "TimeJournal v0.1.3-alpha" --hidden-import='PIL._tkinter_finder' --add-data "assets:assets"
# Windows
pyinstaller app.py --name "TimeJournal v0.1.3-alpha" --hidden-import='PIL._tkinter_finder' --hiddenimport=['sqlalchemy.sql.default_comparator'] --add-data "assets;assets"
```
